<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sawt Al Quran - صوت القرآن</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e0f2f1 0%, #b2dfdb 100%);
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #00897b 0%, #00695c 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 900px;
            margin: 0 auto;
        }

        .header-title {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .header h2 {
            font-size: 16px;
            font-weight: normal;
            opacity: 0.9;
        }

        .header-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .header-controls select,
        .header-controls input {
            width: 100%;
            padding: 12px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            font-size: 16px;
            outline: none;
            background: rgba(255,255,255,0.95);
        }

        .header-controls select:focus,
        .header-controls input:focus {
            border-color: white;
        }

        @media (max-width: 768px) {
            .header-controls {
                grid-template-columns: 1fr;
            }
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        .qari-selector {
            display: none;
        }

        .search-box {
            display: none;
        }

        .player {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: none;
        }

        .player.active {
            display: block;
        }

        .player-info {
            text-align: center;
            margin-bottom: 20px;
        }

        .player-info h3 {
            font-size: 28px;
            color: #00695c;
            margin-bottom: 8px;
        }

        .player-info p {
            color: #666;
            margin-bottom: 4px;
        }

        .current-qari {
            background: #e0f2f1;
            padding: 8px 16px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 8px;
            font-size: 14px;
            color: #00695c;
            font-weight: bold;
        }

        .progress-container {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            margin-bottom: 8px;
            cursor: pointer;
            overflow: hidden;
        }

        .progress-bar {
            background: #00897b;
            height: 100%;
            width: 0%;
            border-radius: 4px;
            transition: width 0.1s;
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #666;
            margin-bottom: 20px;
        }

        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            background: #e0f2f1;
            color: #00897b;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .control-btn:hover {
            background: #b2dfdb;
            transform: scale(1.05);
        }

        .control-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .control-btn.play-btn {
            width: 60px;
            height: 60px;
            background: #00897b;
            color: white;
        }

        .control-btn.play-btn:hover {
            background: #00695c;
        }

        .surah-list {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .surah-item {
            padding: 15px 20px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background 0.2s;
        }

        .surah-item:hover {
            background: #e0f2f1;
        }

        .surah-item.active {
            background: #e0f2f1;
        }

        .surah-info {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .surah-number {
            width: 40px;
            height: 40px;
            background: #00897b;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }

        .surah-names {
            flex: 1;
        }

        .surah-names h3 {
            font-size: 18px;
            color: #333;
            margin-bottom: 4px;
        }

        .surah-names p {
            font-size: 13px;
            color: #666;
        }

        .surah-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .play-action {
            background: #e0f2f1;
            color: #00897b;
        }

        .play-action:hover {
            background: #b2dfdb;
        }

        .download-action {
            background: #e3f2fd;
            color: #1976d2;
        }

        .download-action:hover {
            background: #bbdefb;
        }

        .footer {
            background: #00695c;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 30px;
        }

        .footer p {
            margin-bottom: 5px;
        }

        .list-container {
            max-height: 500px;
            overflow-y: auto;
        }

        .list-container::-webkit-scrollbar {
            width: 8px;
        }

        .list-container::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .list-container::-webkit-scrollbar-thumb {
            background: #00897b;
            border-radius: 4px;
        }

        .list-container::-webkit-scrollbar-thumb:hover {
            background: #00695c;
        }

        svg {
            width: 20px;
            height: 20px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>صوت القرآن - Sawt Al Quran</h1>
        <h2>Complete Quran Audio Collection</h2>
    </div>

    <div class="container">
        <div class="qari-selector">
            <label for="qariSelect">Select Qari:</label>
            <select id="qariSelect">
                <option value="frs_a">Fares Abbad (فارس عباد)</option>
                <option value="abdulbasit_murattal">Abdul Basit (عبد الباسط عبد الصمد)</option>
                <option value="mishari_alafasy">Mishary Rashid Alafasy (مشاري بن راشد العفاسي)</option>
                <option value="mahmoud_ali_albanna">Mahmoud Ali Al-Banna (محمود علي البنا)</option>
                <option value="sds">Saad Al-Ghamdi (سعد الغامدي)</option>
                <option value="ahmed_ibn_ali_ajamy">Ahmed ibn Ali al-Ajamy (أحمد بن علي العجمي)</option>
                <option value="husary">Mahmoud Khalil Al-Hussary (محمود خليل الحصري)</option>
                <option value="sudais">Abdur-Rahman as-Sudais (عبد الرحمن السديس)</option>
                <option value="maher_almuaiqly">Maher Al Muaiqly (ماهر المعيقلي)</option>
            </select>
        </div>

        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Search Surah by name or number...">
        </div>

        <div class="player" id="player">
            <div class="player-info">
                <h3 id="currentSurahArabic"></h3>
                <p id="currentSurahEnglish"></p>
                <p id="currentSurahDetails"></p>
                <span class="current-qari" id="currentQari"></span>
            </div>

            <div class="progress-container" id="progressContainer">
                <div class="progress-bar" id="progressBar"></div>
            </div>

            <div class="time-display">
                <span id="currentTime">0:00</span>
                <span id="duration">0:00</span>
            </div>

            <div class="controls">
                <button class="control-btn" id="prevBtn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
                    </svg>
                </button>

                <button class="control-btn play-btn" id="playBtn">
                    <svg id="playIcon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                    <svg id="pauseIcon" viewBox="0 0 24 24" fill="currentColor" style="display:none;">
                        <path d="M6 4h4v16H6zm8 0h4v16h-4z"/>
                    </svg>
                </button>

                <button class="control-btn" id="nextBtn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M16 18h2V6h-2zm-11-1l8.5-6L6 5z"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="surah-list">
            <div class="list-container" id="surahList"></div>
        </div>
    </div>

    <div class="footer">
        <p>Sawt Al Quran - Complete Quran Audio Collection</p>
        <p style="font-size: 12px; opacity: 0.9;">Made with Love for the Ummah</p>
    </div>

    <audio id="audioPlayer"></audio>

    <script>
        var surahs = [
            { number: 1, arabic: "الفاتحة", english: "Al-Fatihah", verses: 7 },
            { number: 2, arabic: "البقرة", english: "Al-Baqarah", verses: 286 },
            { number: 3, arabic: "آل عمران", english: "Aali Imran", verses: 200 },
            { number: 4, arabic: "النساء", english: "An-Nisa", verses: 176 },
            { number: 5, arabic: "المائدة", english: "Al-Ma'idah", verses: 120 },
            { number: 6, arabic: "الأنعام", english: "Al-An'am", verses: 165 },
            { number: 7, arabic: "الأعراف", english: "Al-A'raf", verses: 206 },
            { number: 8, arabic: "الأنفال", english: "Al-Anfal", verses: 75 },
            { number: 9, arabic: "التوبة", english: "At-Tawbah", verses: 129 },
            { number: 10, arabic: "يونس", english: "Yunus", verses: 109 },
            { number: 11, arabic: "هود", english: "Hud", verses: 123 },
            { number: 12, arabic: "يوسف", english: "Yusuf", verses: 111 },
            { number: 13, arabic: "الرعد", english: "Ar-Ra'd", verses: 43 },
            { number: 14, arabic: "ابراهيم", english: "Ibrahim", verses: 52 },
            { number: 15, arabic: "الحجر", english: "Al-Hijr", verses: 99 },
            { number: 16, arabic: "النحل", english: "An-Nahl", verses: 128 },
            { number: 17, arabic: "الإسراء", english: "Al-Isra", verses: 111 },
            { number: 18, arabic: "الكهف", english: "Al-Kahf", verses: 110 },
            { number: 19, arabic: "مريم", english: "Maryam", verses: 98 },
            { number: 20, arabic: "طه", english: "Ta-Ha", verses: 135 },
            { number: 21, arabic: "الأنبياء", english: "Al-Anbiya", verses: 112 },
            { number: 22, arabic: "الحج", english: "Al-Hajj", verses: 78 },
            { number: 23, arabic: "المؤمنون", english: "Al-Mu'minun", verses: 118 },
            { number: 24, arabic: "النور", english: "An-Nur", verses: 64 },
            { number: 25, arabic: "الفرقان", english: "Al-Furqan", verses: 77 },
            { number: 26, arabic: "الشعراء", english: "Ash-Shu'ara", verses: 227 },
            { number: 27, arabic: "النمل", english: "An-Naml", verses: 93 },
            { number: 28, arabic: "القصص", english: "Al-Qasas", verses: 88 },
            { number: 29, arabic: "العنكبوت", english: "Al-Ankabut", verses: 69 },
            { number: 30, arabic: "الروم", english: "Ar-Rum", verses: 60 },
            { number: 31, arabic: "لقمان", english: "Luqman", verses: 34 },
            { number: 32, arabic: "السجدة", english: "As-Sajdah", verses: 30 },
            { number: 33, arabic: "الأحزاب", english: "Al-Ahzab", verses: 73 },
            { number: 34, arabic: "سبإ", english: "Saba", verses: 54 },
            { number: 35, arabic: "فاطر", english: "Fatir", verses: 45 },
            { number: 36, arabic: "يس", english: "Ya-Sin", verses: 83 },
            { number: 37, arabic: "الصافات", english: "As-Saffat", verses: 182 },
            { number: 38, arabic: "ص", english: "Sad", verses: 88 },
            { number: 39, arabic: "الزمر", english: "Az-Zumar", verses: 75 },
            { number: 40, arabic: "غافر", english: "Ghafir", verses: 85 },
            { number: 41, arabic: "فصلت", english: "Fussilat", verses: 54 },
            { number: 42, arabic: "الشورى", english: "Ash-Shura", verses: 53 },
            { number: 43, arabic: "الزخرف", english: "Az-Zukhruf", verses: 89 },
            { number: 44, arabic: "الدخان", english: "Ad-Dukhan", verses: 59 },
            { number: 45, arabic: "الجاثية", english: "Al-Jathiyah", verses: 37 },
            { number: 46, arabic: "الأحقاف", english: "Al-Ahqaf", verses: 35 },
            { number: 47, arabic: "محمد", english: "Muhammad", verses: 38 },
            { number: 48, arabic: "الفتح", english: "Al-Fath", verses: 29 },
            { number: 49, arabic: "الحجرات", english: "Al-Hujurat", verses: 18 },
            { number: 50, arabic: "ق", english: "Qaf", verses: 45 },
            { number: 51, arabic: "الذاريات", english: "Adh-Dhariyat", verses: 60 },
            { number: 52, arabic: "الطور", english: "At-Tur", verses: 49 },
            { number: 53, arabic: "النجم", english: "An-Najm", verses: 62 },
            { number: 54, arabic: "القمر", english: "Al-Qamar", verses: 55 },
            { number: 55, arabic: "الرحمن", english: "Ar-Rahman", verses: 78 },
            { number: 56, arabic: "الواقعة", english: "Al-Waqi'ah", verses: 96 },
            { number: 57, arabic: "الحديد", english: "Al-Hadid", verses: 29 },
            { number: 58, arabic: "المجادلة", english: "Al-Mujadila", verses: 22 },
            { number: 59, arabic: "الحشر", english: "Al-Hashr", verses: 24 },
            { number: 60, arabic: "الممتحنة", english: "Al-Mumtahanah", verses: 13 },
            { number: 61, arabic: "الصف", english: "As-Saf", verses: 14 },
            { number: 62, arabic: "الجمعة", english: "Al-Jumu'ah", verses: 11 },
            { number: 63, arabic: "المنافقون", english: "Al-Munafiqun", verses: 11 },
            { number: 64, arabic: "التغابن", english: "At-Taghabun", verses: 18 },
            { number: 65, arabic: "الطلاق", english: "At-Talaq", verses: 12 },
            { number: 66, arabic: "التحريم", english: "At-Tahrim", verses: 12 },
            { number: 67, arabic: "الملك", english: "Al-Mulk", verses: 30 },
            { number: 68, arabic: "القلم", english: "Al-Qalam", verses: 52 },
            { number: 69, arabic: "الحاقة", english: "Al-Haqqah", verses: 52 },
            { number: 70, arabic: "المعارج", english: "Al-Ma'arij", verses: 44 },
            { number: 71, arabic: "نوح", english: "Nuh", verses: 28 },
            { number: 72, arabic: "الجن", english: "Al-Jinn", verses: 28 },
            { number: 73, arabic: "المزمل", english: "Al-Muzzammil", verses: 20 },
            { number: 74, arabic: "المدثر", english: "Al-Muddaththir", verses: 56 },
            { number: 75, arabic: "القيامة", english: "Al-Qiyamah", verses: 40 },
            { number: 76, arabic: "الانسان", english: "Al-Insan", verses: 31 },
            { number: 77, arabic: "المرسلات", english: "Al-Mursalat", verses: 50 },
            { number: 78, arabic: "النبإ", english: "An-Naba", verses: 40 },
            { number: 79, arabic: "النازعات", english: "An-Nazi'at", verses: 46 },
            { number: 80, arabic: "عبس", english: "Abasa", verses: 42 },
            { number: 81, arabic: "التكوير", english: "At-Takwir", verses: 29 },
            { number: 82, arabic: "الإنفطار", english: "Al-Infitar", verses: 19 },
            { number: 83, arabic: "المطففين", english: "Al-Mutaffifin", verses: 36 },
            { number: 84, arabic: "الإنشقاق", english: "Al-Inshiqaq", verses: 25 },
            { number: 85, arabic: "البروج", english: "Al-Buruj", verses: 22 },
            { number: 86, arabic: "الطارق", english: "At-Tariq", verses: 17 },
            { number: 87, arabic: "الأعلى", english: "Al-A'la", verses: 19 },
            { number: 88, arabic: "الغاشية", english: "Al-Ghashiyah", verses: 26 },
            { number: 89, arabic: "الفجر", english: "Al-Fajr", verses: 30 },
            { number: 90, arabic: "البلد", english: "Al-Balad", verses: 20 },
            { number: 91, arabic: "الشمس", english: "Ash-Shams", verses: 15 },
            { number: 92, arabic: "الليل", english: "Al-Layl", verses: 21 },
            { number: 93, arabic: "الضحى", english: "Ad-Duha", verses: 11 },
            { number: 94, arabic: "الشرح", english: "Ash-Sharh", verses: 8 },
            { number: 95, arabic: "التين", english: "At-Tin", verses: 8 },
            { number: 96, arabic: "العلق", english: "Al-Alaq", verses: 19 },
            { number: 97, arabic: "القدر", english: "Al-Qadr", verses: 5 },
            { number: 98, arabic: "البينة", english: "Al-Bayyinah", verses: 8 },
            { number: 99, arabic: "الزلزلة", english: "Az-Zalzalah", verses: 8 },
            { number: 100, arabic: "العاديات", english: "Al-Adiyat", verses: 11 },
            { number: 101, arabic: "القارعة", english: "Al-Qari'ah", verses: 11 },
            { number: 102, arabic: "التكاثر", english: "At-Takathur", verses: 8 },
            { number: 103, arabic: "العصر", english: "Al-Asr", verses: 3 },
            { number: 104, arabic: "الهمزة", english: "Al-Humazah", verses: 9 },
            { number: 105, arabic: "الفيل", english: "Al-Fil", verses: 5 },
            { number: 106, arabic: "قريش", english: "Quraysh", verses: 4 },
            { number: 107, arabic: "الماعون", english: "Al-Ma'un", verses: 7 },
            { number: 108, arabic: "الكوثر", english: "Al-Kawthar", verses: 3 },
            { number: 109, arabic: "الكافرون", english: "Al-Kafirun", verses: 6 },
            { number: 110, arabic: "النصر", english: "An-Nasr", verses: 3 },
            { number: 111, arabic: "المسد", english: "Al-Masad", verses: 5 },
            { number: 112, arabic: "الإخلاص", english: "Al-Ikhlas", verses: 4 },
            { number: 113, arabic: "الفلق", english: "Al-Falaq", verses: 5 },
            { number: 114, arabic: "الناس", english: "An-Nas", verses: 6 }
        ];

        var qaris = {
            'frs_a': { name: 'Fares Abbad', server: 'server8', folder: 'frs_a' },
            'abdulbasit_murattal': { name: 'Abdul Basit', server: 'server7', folder: 'abdulbasit_murattal' },
            'mishari_alafasy': { name: 'Mishary Alafasy', server: 'server8', folder: 'alafasy' },
            'mahmoud_ali_albanna': { name: 'Mahmoud Ali Al-Banna', server: 'server10', folder: 'mahmoud_ali_albanna' },
            'sds': { name: 'Saad Al-Ghamdi', server: 'server7', folder: 'sds' },
            'ahmed_ibn_ali_ajamy': { name: 'Ahmed Al-Ajamy', server: 'server10', folder: 'ahmed_ibn_ali_al-ajamy' },
            'husary': { name: 'Al-Hussary', server: 'server8', folder: 'husary' },
            'sudais': { name: 'Abdur-Rahman as-Sudais', server: 'server11', folder: 'sds' },
            'maher_almuaiqly': { name: 'Maher Al Muaiqly', server: 'server12', folder: 'maher' }
        };

        var currentSurah = null;
        var isPlaying = false;
        var currentQari = 'frs_a';
        var audio = document.getElementById('audioPlayer');
        var player = document.getElementById('player');
        var playBtn = document.getElementById('playBtn');
        var playIcon = document.getElementById('playIcon');
        var pauseIcon = document.getElementById('pauseIcon');
        var progressBar = document.getElementById('progressBar');
        var progressContainer = document.getElementById('progressContainer');
        var currentTimeEl = document.getElementById('currentTime');
        var durationEl = document.getElementById('duration');
        var searchInput = document.getElementById('searchInput');
        var prevBtn = document.getElementById('prevBtn');
        var nextBtn = document.getElementById('nextBtn');
        var qariSelect = document.getElementById('qariSelect');

        function getAudioUrl(surahNumber) {
            var paddedNumber = String(surahNumber).padStart(3, '0');
            var qari = qaris[currentQari];
            return 'https://' + qari.server + '.mp3quran.net/' + qari.folder + '/' + paddedNumber + '.mp3';
        }

        function formatTime(seconds) {
            if (!seconds || isNaN(seconds)) return '0:00';
            var mins = Math.floor(seconds / 60);
            var secs = Math.floor(seconds % 60);
            return mins + ':' + (secs < 10 ? '0' : '') + secs;
        }

        function updatePlayerUI(surah) {
            document.getElementById('currentSurahArabic').textContent = surah.arabic;
            document.getElementById('currentSurahEnglish').textContent = surah.english;
            document.getElementById('currentSurahDetails').textContent = 'Surah ' + surah.number + ' - ' + surah.verses + ' Verses';
            document.getElementById('currentQari').textContent = 'Qari: ' + qaris[currentQari].name;
            player.classList.add('active');
        }

        function playSurah(surah) {
            if (currentSurah && currentSurah.number === surah.number && isPlaying) {
                audio.pause();
                isPlaying = false;
                updatePlayButton();
            } else {
                if (!currentSurah || currentSurah.number !== surah.number) {
                    currentSurah = surah;
                    audio.src = getAudioUrl(surah.number);
                    updatePlayerUI(surah);
                }
                audio.play();
                isPlaying = true;
                updatePlayButton();
            }
            updateActiveItem();
        }

        function togglePlay() {
            if (currentSurah) {
                playSurah(currentSurah);
            }
        }

        function playNext() {
            if (currentSurah && currentSurah.number < 114) {
                var nextSurah = surahs[currentSurah.number];
                currentSurah = nextSurah;
                audio.src = getAudioUrl(nextSurah.number);
                audio.play();
                isPlaying = true;
                updatePlayerUI(nextSurah);
                updatePlayButton();
                updateActiveItem();
            }
        }

        function playPrevious() {
            if (currentSurah && currentSurah.number > 1) {
                var prevSurah = surahs[currentSurah.number - 2];
                currentSurah = prevSurah;
                audio.src = getAudioUrl(prevSurah.number);
                audio.play();
                isPlaying = true;
                updatePlayerUI(prevSurah);
                updatePlayButton();
                updateActiveItem();
            }
        }

        function updatePlayButton() {
            if (isPlaying) {
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
            } else {
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
            }
        }

        function updateActiveItem() {
            var items = document.querySelectorAll('.surah-item');
            for (var i = 0; i < items.length; i++) {
                items[i].classList.remove('active');
            }
            if (currentSurah) {
                var activeItem = document.querySelector('[data-surah="' + currentSurah.number + '"]');
                if (activeItem) {
                    activeItem.classList.add('active');
                }
            }
        }

        function downloadSurah(surah) {
            var url = getAudioUrl(surah.number);
            var a = document.createElement('a');
            a.href = url;
            a.download = surah.number + '-' + surah.english + '-' + qaris[currentQari].name + '.mp3';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        function renderSurahs(filteredSurahs) {
            var surahList = document.getElementById('surahList');
            surahList.innerHTML = '';

            for (var i = 0; i < filteredSurahs.length; i++) {
                var surah = filteredSurahs[i];
                var item = document.createElement('div');
                item.className = 'surah-item';
                item.setAttribute('data-surah', surah.number);
                item.setAttribute('data-index', i);
                
                item.innerHTML = '<div class="surah-info">' +
                    '<div class="surah-number">' + surah.number + '</div>' +
                    '<div class="surah-names">' +
                    '<h3>' + surah.arabic + '</h3>' +
                    '<p>' + surah.english + ' - ' + surah.verses + ' Verses</p>' +
                    '</div>' +
                    '</div>' +
                    '<div class="surah-actions">' +
                    '<button class="action-btn play-action" data-action="play" data-surah-num="' + surah.number + '">' +
                    '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>' +
                    '</button>' +
                    '<button class="action-btn download-action" data-action="download" data-surah-num="' + surah.number + '">' +
                    '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>' +
                    '</button>' +
                    '</div>';
                
                surahList.appendChild(item);
            }
        }

        qariSelect.addEventListener('change', function() {
            currentQari = qariSelect.value;
            if (currentSurah) {
                audio.src = getAudioUrl(currentSurah.number);
                if (isPlaying) {
                    audio.play();
                }
                updatePlayerUI(currentSurah);
            }
        });

        document.addEventListener('click', function(e) {
            var target = e.target;
            while (target && !target.hasAttribute('data-action')) {
                target = target.parentElement;
            }
            
            if (target) {
                var action = target.getAttribute('data-action');
                var surahNum = parseInt(target.getAttribute('data-surah-num'));
                var surah = surahs[surahNum - 1];
                
                if (action === 'play') {
                    playSurah(surah);
                } else if (action === 'download') {
                    downloadSurah(surah);
                }
            }
        });

        playBtn.addEventListener('click', togglePlay);
        prevBtn.addEventListener('click', playPrevious);
        nextBtn.addEventListener('click', playNext);

        audio.addEventListener('timeupdate', function() {
            if (audio.duration) {
                var progress = (audio.currentTime / audio.duration) * 100;
                progressBar.style.width = progress + '%';
                currentTimeEl.textContent = formatTime(audio.currentTime);
                durationEl.textContent = formatTime(audio.duration);
            }
        });

        audio.addEventListener('ended', function() {
            isPlaying = false;
            updatePlayButton();
            playNext();
        });

        audio.addEventListener('loadedmetadata', function() {
            durationEl.textContent = formatTime(audio.duration);
        });

        progressContainer.addEventListener('click', function(e) {
            var rect = progressContainer.getBoundingClientRect();
            var percent = (e.clientX - rect.left) / rect.width;
            audio.currentTime = percent * audio.duration;
        });

        searchInput.addEventListener('input', function(e) {
            var term = e.target.value.toLowerCase();
            var filtered = surahs.filter(function(surah) {
                return surah.arabic.includes(term) ||
                    surah.english.toLowerCase().includes(term) ||
                    surah.number.toString().includes(term);
            });
            renderSurahs(filtered);
        });

        renderSurahs(surahs);
    </script>
</body>
</html>
